---
id: DataProduct
title: DataProduct
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> DataProduct</h2><p class="base-contracts"><span>is</span> <a href="api_utils_Ownable.md">Ownable</a><span>, </span><a href="api_utils_Versionable.md">Versionable</a><span>, </span><a href="api_interface_DataProductInterface.md">DataProductInterface</a></p><div class="source">Source: <a href="git+https://github.com/repux/repux-smart-contracts/blob/v1.3.1/contracts/DataProduct.sol" target="_blank">DataProduct.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="api_DataProduct.md#cancelpurchase">cancelPurchase</a></li><li><a href="api_DataProduct.md#disable">disable</a></li><li><a href="api_DataProduct.md#disabled">disabled</a></li><li><a href="api_DataProduct.md#">fallback</a></li><li><a href="api_DataProduct.md#finalise">finalise</a></li><li><a href="api_DataProduct.md#getbuyersaddresses">getBuyersAddresses</a></li><li><a href="api_DataProduct.md#getorder">getOrder</a></li><li><a href="api_DataProduct.md#getorderfor">getOrderFor</a></li><li><a href="api_DataProduct.md#getordersaddresses">getOrdersAddresses</a></li><li><a href="api_DataProduct.md#iskycrequired">isKycRequired</a></li><li><a href="api_DataProduct.md#kill">kill</a></li><li><a href="api_DataProduct.md#onlybuyer">onlyBuyer</a></li><li><a href="api_DataProduct.md#onlyenabled">onlyEnabled</a></li><li><a href="api_DataProduct.md#purchase">purchase</a></li><li><a href="api_DataProduct.md#purchasefor">purchaseFor</a></li><li><a href="api_DataProduct.md#rate">rate</a></li><li><a href="api_DataProduct.md#setdaystodeliver">setDaysToDeliver</a></li><li><a href="api_DataProduct.md#setdaystorate">setDaysToRate</a></li><li><a href="api_DataProduct.md#setkyc">setKyc</a></li><li><a href="api_DataProduct.md#setprice">setPrice</a></li><li><a href="api_DataProduct.md#setsellermetahash">setSellerMetaHash</a></li><li><a href="api_DataProduct.md#withdraw">withdraw</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="isKycRequired" class="anchor-marker"></span><h4 class="name">isKycRequired</h4><div class="body"><code class="signature">modifier <strong>isKycRequired</strong><span>() </span></code><hr/></div></div></li><li><div class="item modifier"><span id="onlyBuyer" class="anchor-marker"></span><h4 class="name">onlyBuyer</h4><div class="body"><code class="signature">modifier <strong>onlyBuyer</strong><span>() </span></code><hr/></div></div></li><li><div class="item modifier"><span id="onlyEnabled" class="anchor-marker"></span><h4 class="name">onlyEnabled</h4><div class="body"><code class="signature">modifier <strong>onlyEnabled</strong><span>() </span></code><hr/></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="cancelPurchase" class="anchor-marker"></span><h4 class="name">cancelPurchase</h4><div class="body"><code class="signature">function <strong>cancelPurchase</strong><span>() </span><span>public </span></code><hr/><div class="description"><p>Canceling of purchase is available after Order delivery period expires and Order is not yet finalised. Returns tokens to buyer and releases tokens from contract deposit by price amount.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_DataProduct.md#onlybuyer">onlyBuyer </a></dd></dl></div></div></li><li><div class="item function"><span id="disable" class="anchor-marker"></span><h4 class="name">disable</h4><div class="body"><code class="signature">function <strong>disable</strong><span>() </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_utils_Ownable.md#onlyowner">onlyOwner </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd></dl></div></div></li><li><div class="item function"><span id="disabled" class="anchor-marker"></span><h4 class="name">disabled</h4><div class="body"><code class="signature">function <strong>disabled</strong><span>() </span><span>public </span><span>view </span><span>returns  (bool) </span></code><hr/><dl><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>(address _registryAddress, address _orderFactoryAddress, address _owner, address _tokenAddress, string _sellerMetaHash, uint256 _price, uint8 _daysToDeliver, uint16 _version) </span><span>public </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_registryAddress</code> - address of administrative contract</div><div><code>_orderFactoryAddress</code> - address of factory for handling new orders</div><div><code>_owner</code> - address of data product creator</div><div><code>_tokenAddress</code> - address of currency token</div><div><code>_sellerMetaHash</code> - hash to file within IPFS DB with data product meta information</div><div><code>_price</code> - data product price in Repux Token</div><div><code>_daysToDeliver</code> - days period in which seller is obligated to finalise transaction</div><div><code>_version</code> - internal version for contract retrieved from factory</div></dd></dl></div></div></li><li><div class="item function"><span id="finalise" class="anchor-marker"></span><h4 class="name">finalise</h4><div class="body"><code class="signature">function <strong>finalise</strong><span>(address _buyerAddress, string _buyerMetaHash) </span><span>public </span></code><hr/><div class="description"><p>Perform order finalisation by data product owner. Handles fee transfer to Registry contract and releases tokens from contract deposit by price amount to be available for seller withdrawal.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_utils_Ownable.md#onlyowner">onlyOwner </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_buyerAddress</code> - buyer address</div><div><code>_buyerMetaHash</code> - hash to IPFS file containing all necessary data to manage bought file</div></dd></dl></div></div></li><li><div class="item function"><span id="getBuyersAddresses" class="anchor-marker"></span><h4 class="name">getBuyersAddresses</h4><div class="body"><code class="signature">function <strong>getBuyersAddresses</strong><span>() </span><span>public </span><span>view </span><span>returns  (address[]) </span></code><hr/><dl><dt><span class="label-return">Returns:</span></dt><dd>address[]</dd></dl></div></div></li><li><div class="item function"><span id="getOrder" class="anchor-marker"></span><h4 class="name">getOrder</h4><div class="body"><code class="signature">function <strong>getOrder</strong><span>() </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><dl><dt><span class="label-return">Returns:</span></dt><dd>address</dd></dl></div></div></li><li><div class="item function"><span id="getOrderFor" class="anchor-marker"></span><h4 class="name">getOrderFor</h4><div class="body"><code class="signature">function <strong>getOrderFor</strong><span>(address _address) </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_address</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address</dd></dl></div></div></li><li><div class="item function"><span id="getOrdersAddresses" class="anchor-marker"></span><h4 class="name">getOrdersAddresses</h4><div class="body"><code class="signature">function <strong>getOrdersAddresses</strong><span>() </span><span>public </span><span>view </span><span>returns  (address[]) </span></code><hr/><dl><dt><span class="label-return">Returns:</span></dt><dd>address[]</dd></dl></div></div></li><li><div class="item function"><span id="kill" class="anchor-marker"></span><h4 class="name">kill</h4><div class="body"><code class="signature">function <strong>kill</strong><span>() </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_utils_Ownable.md#onlyowner">onlyOwner </a></dd></dl></div></div></li><li><div class="item function"><span id="purchase" class="anchor-marker"></span><h4 class="name">purchase</h4><div class="body"><code class="signature">function <strong>purchase</strong><span>(string publicKey) </span><span>public </span><span>returns  (address) </span></code><hr/><div class="description"><p>Make a purchase.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_DataProduct.md#iskycrequired">isKycRequired </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>publicKey</code> - a key used for encoding bought file which contains data product</div></dd><dt><span class="label-return">Returns:</span></dt><dd>{ &quot;orderAddress&quot;: &quot;The contract address to buyer&#x27;s order&quot; }</dd></dl></div></div></li><li><div class="item function"><span id="purchaseFor" class="anchor-marker"></span><h4 class="name">purchaseFor</h4><div class="body"><code class="signature">function <strong>purchaseFor</strong><span>(address _buyerAddress, string _buyerPublicKey) </span><span>public </span><span>returns  (address) </span></code><hr/><div class="description"><p>Make a purchase on behalf of specific buyer address. Data Product Contract receives tokens (price amount) and holds that amount in deposit until order is completed or canceled.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_DataProduct.md#iskycrequired">isKycRequired </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_buyerAddress</code> - buyer address</div><div><code>_buyerPublicKey</code> - a key used for encoding bought file which contains data product</div></dd><dt><span class="label-return">Returns:</span></dt><dd>{ &quot;orderAddress&quot;: &quot;The contract address to buyer&#x27;s order&quot; }</dd></dl></div></div></li><li><div class="item function"><span id="rate" class="anchor-marker"></span><h4 class="name">rate</h4><div class="body"><code class="signature">function <strong>rate</strong><span>(uint8 score) </span><span>public </span></code><hr/><div class="description"><p>Perform order rating which is available right after order finalisation. Only buyer and only once has possibility to rate order in given period of time.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_DataProduct.md#onlybuyer">onlyBuyer </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>score</code> - integer between 1 to 5</div></dd></dl></div></div></li><li><div class="item function"><span id="setDaysToDeliver" class="anchor-marker"></span><h4 class="name">setDaysToDeliver</h4><div class="body"><code class="signature">function <strong>setDaysToDeliver</strong><span>(uint8 _daysToDeliver) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_utils_Ownable.md#onlyowner">onlyOwner </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_daysToDeliver</code> - uint8</div></dd></dl></div></div></li><li><div class="item function"><span id="setDaysToRate" class="anchor-marker"></span><h4 class="name">setDaysToRate</h4><div class="body"><code class="signature">function <strong>setDaysToRate</strong><span>(uint8 _daysToRate) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_utils_Ownable.md#onlyowner">onlyOwner </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_daysToRate</code> - uint8</div></dd></dl></div></div></li><li><div class="item function"><span id="setKyc" class="anchor-marker"></span><h4 class="name">setKyc</h4><div class="body"><code class="signature">function <strong>setKyc</strong><span>(bool _kyc) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_utils_Ownable.md#onlyowner">onlyOwner </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_kyc</code> - bool</div></dd></dl></div></div></li><li><div class="item function"><span id="setPrice" class="anchor-marker"></span><h4 class="name">setPrice</h4><div class="body"><code class="signature">function <strong>setPrice</strong><span>(uint256 newPrice) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_utils_Ownable.md#onlyowner">onlyOwner </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>newPrice</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="setSellerMetaHash" class="anchor-marker"></span><h4 class="name">setSellerMetaHash</h4><div class="body"><code class="signature">function <strong>setSellerMetaHash</strong><span>(string _sellerMetaHash) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_utils_Ownable.md#onlyowner">onlyOwner </a><a href="api_DataProduct.md#onlyenabled">onlyEnabled </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_sellerMetaHash</code> - string</div></dd></dl></div></div></li><li><div class="item function"><span id="withdraw" class="anchor-marker"></span><h4 class="name">withdraw</h4><div class="body"><code class="signature">function <strong>withdraw</strong><span>() </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="api_utils_Ownable.md#onlyowner">onlyOwner </a></dd></dl></div></div></li></ul></div></div></div>
